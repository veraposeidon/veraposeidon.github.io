<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.webp" color="#222">
  <meta name="google-site-verification" content="Cj9oDgXxdJe6MoA_lEUQ2rmOouwJeTm5uJNqjhOv8Ng">
  <meta name="msvalidate.01" content="E5D0AA8F5E012DFD9C5F3954DF8283B1">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,700,700italic%7CNoto+Serif+SC:300,300italic,400,400italic,700,700italic%7CSource+Code+Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"shenxiaohai.me","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.15.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"default"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":"twikoo","storage":true,"lazyload":false,"nav":null,"activeClass":"twikoo"},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="项目来自Udacity 机器学习工程师纳米学位。题目通过对UCI的波士顿房价数据进行分析，训练和测试一个模型，并对模型的性能和预测能力进行测试，重点：数据载入、分割、网格搜索最优化、健壮性测试。">
<meta property="og:type" content="article">
<meta property="og:title" content="波士顿房价预测">
<meta property="og:url" content="https://shenxiaohai.me/boston-housing/index.html">
<meta property="og:site_name" content="SHEN&#39;s DevNotes">
<meta property="og:description" content="项目来自Udacity 机器学习工程师纳米学位。题目通过对UCI的波士顿房价数据进行分析，训练和测试一个模型，并对模型的性能和预测能力进行测试，重点：数据载入、分割、网格搜索最优化、健壮性测试。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511029/blog/wehcmgjziilzv3pkjyjo.jpg">
<meta property="og:image" content="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511030/blog/vg9pm23ctskr7cmonchm.png">
<meta property="og:image" content="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511030/blog/kzcommvdky5asmhngrez.png">
<meta property="og:image" content="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511031/blog/tncxzjtsltx5l2tutb8q.png">
<meta property="og:image" content="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511032/blog/dczy6i3zfc4pkwboaxln.png">
<meta property="article:published_time" content="2018-07-20T10:41:08.000Z">
<meta property="article:modified_time" content="2023-03-11T05:03:52.785Z">
<meta property="article:author" content="xiaohai">
<meta property="article:tag" content="机器学习">
<meta property="article:tag" content="数据分析">
<meta property="article:tag" content="网格搜索">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511029/blog/wehcmgjziilzv3pkjyjo.jpg">


<link rel="canonical" href="https://shenxiaohai.me/boston-housing/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://shenxiaohai.me/boston-housing/","path":"boston-housing/","title":"波士顿房价预测"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>波士顿房价预测 | SHEN's DevNotes</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YDT7F4NZP6"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"G-YDT7F4NZP6","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="SHEN's DevNotes" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">SHEN's DevNotes</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">学习笔记，编程技巧，效率工具</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">131</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">18</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">74</span></a></li><li class="menu-item menu-item-碎碎念-|-memos"><a href="https://memos.shenxiaohai.me/" rel="section" target="_blank"><i class="fa fa-file-pen fa-fw"></i>碎碎念 | Memos</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BB%B7%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="nav-text">模型评价与验证</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE-1-%E9%A2%84%E6%B5%8B%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7"><span class="nav-text">项目 1: 预测波士顿房价</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5-%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-text">第一步. 导入数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%88%86%E6%9E%90%E6%95%B0%E6%8D%AE"><span class="nav-text">第二步. 分析数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0-1%EF%BC%9A%E5%9F%BA%E7%A1%80%E7%BB%9F%E8%AE%A1%E8%BF%90%E7%AE%97"><span class="nav-text">编程练习 1：基础统计运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-1-%E7%89%B9%E5%BE%81%E8%A7%82%E5%AF%9F"><span class="nav-text">问题 1 - 特征观察</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-1-%E5%9B%9E%E7%AD%94%EF%BC%9A"><span class="nav-text">问题 1 - 回答：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0-2-%E6%95%B0%E6%8D%AE%E5%88%86%E5%89%B2%E4%B8%8E%E9%87%8D%E6%8E%92"><span class="nav-text">编程练习 2: 数据分割与重排</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-2-%E8%AE%AD%E7%BB%83%E5%8F%8A%E6%B5%8B%E8%AF%95"><span class="nav-text">问题 2 - 训练及测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-2-%E5%9B%9E%E7%AD%94"><span class="nav-text">问题 2 - 回答:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5-%E6%A8%A1%E5%9E%8B%E8%A1%A1%E9%87%8F%E6%A0%87%E5%87%86"><span class="nav-text">第三步. 模型衡量标准</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A03%EF%BC%9A%E5%AE%9A%E4%B9%89%E8%A1%A1%E9%87%8F%E6%A0%87%E5%87%86"><span class="nav-text">编程练习3：定义衡量标准</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-3-%E6%8B%9F%E5%90%88%E7%A8%8B%E5%BA%A6"><span class="nav-text">问题 3 - 拟合程度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-3-%E5%9B%9E%E7%AD%94"><span class="nav-text">问题 3 - 回答:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5-%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%A1%A8%E7%8E%B0"><span class="nav-text">第四步. 分析模型的表现</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%A6%E4%B9%A0%E6%9B%B2%E7%BA%BF"><span class="nav-text">学习曲线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-4-%E5%AD%A6%E4%B9%A0%E6%9B%B2%E7%BA%BF"><span class="nav-text">问题 4 - 学习曲线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-4-%E5%9B%9E%E7%AD%94"><span class="nav-text">问题 4 - 回答:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E6%9D%82%E5%BA%A6%E6%9B%B2%E7%BA%BF"><span class="nav-text">复杂度曲线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-5-%E5%81%8F%E5%B7%AE%EF%BC%88bias%EF%BC%89%E4%B8%8E%E6%96%B9%E5%B7%AE%EF%BC%88variance%EF%BC%89%E4%B9%8B%E9%97%B4%E7%9A%84%E6%9D%83%E8%A1%A1%E5%8F%96%E8%88%8D"><span class="nav-text">问题 5 - 偏差（bias）与方差（variance）之间的权衡取舍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-5-%E5%9B%9E%E7%AD%94"><span class="nav-text">问题 5 - 回答:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-6-%E6%9C%80%E4%BC%98%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%8C%9C%E6%B5%8B"><span class="nav-text">问题 6- 最优模型的猜测</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-6-%E5%9B%9E%E7%AD%94"><span class="nav-text">问题 6 - 回答:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E4%BA%94%E6%AD%A5-%E9%80%89%E6%8B%A9%E6%9C%80%E4%BC%98%E5%8F%82%E6%95%B0"><span class="nav-text">第五步. 选择最优参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-7-%E7%BD%91%E6%A0%BC%E6%90%9C%E7%B4%A2%EF%BC%88Grid-Search%EF%BC%89"><span class="nav-text">问题 7- 网格搜索（Grid Search）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-7-%E5%9B%9E%E7%AD%94"><span class="nav-text">问题 7 - 回答:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-8-%E4%BA%A4%E5%8F%89%E9%AA%8C%E8%AF%81"><span class="nav-text">问题 8 - 交叉验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-8-%E5%9B%9E%E7%AD%94%EF%BC%9A"><span class="nav-text">问题 8 - 回答：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0-4%EF%BC%9A%E8%AE%AD%E7%BB%83%E6%9C%80%E4%BC%98%E6%A8%A1%E5%9E%8B"><span class="nav-text">编程练习 4：训练最优模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0-4%EF%BC%9A%E8%AE%AD%E7%BB%83%E6%9C%80%E4%BC%98%E6%A8%A1%E5%9E%8B-%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="nav-text">编程练习 4：训练最优模型 （可选）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-9-%E6%9C%80%E4%BC%98%E6%A8%A1%E5%9E%8B"><span class="nav-text">问题 9 - 最优模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-9-%E5%9B%9E%E7%AD%94%EF%BC%9A"><span class="nav-text">问题 9 - 回答：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%AC%E5%85%AD%E6%AD%A5-%E5%81%9A%E5%87%BA%E9%A2%84%E6%B5%8B"><span class="nav-text">第六步. 做出预测</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-10-%E9%A2%84%E6%B5%8B%E9%94%80%E5%94%AE%E4%BB%B7%E6%A0%BC"><span class="nav-text">问题 10 - 预测销售价格</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-10-%E5%9B%9E%E7%AD%94%EF%BC%9A"><span class="nav-text">问题 10 - 回答：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E7%A8%8B%E7%BB%83%E4%B9%A0-5"><span class="nav-text">编程练习 5</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%9811-%E5%88%86%E6%9E%90%E5%86%B3%E5%AE%9A%E7%B3%BB%E6%95%B0"><span class="nav-text">问题11 - 分析决定系数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%9811-%E5%9B%9E%E7%AD%94"><span class="nav-text">问题11 - 回答</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%9E%8B%E5%81%A5%E5%A3%AE%E6%80%A7"><span class="nav-text">模型健壮性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-12-%E6%A8%A1%E5%9E%8B%E5%81%A5%E5%A3%AE%E6%80%A7"><span class="nav-text">问题 12 - 模型健壮性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-12-%E5%9B%9E%E7%AD%94%EF%BC%9A"><span class="nav-text">问题 12 - 回答：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-13-%E5%AE%9E%E7%94%A8%E6%80%A7%E6%8E%A2%E8%AE%A8"><span class="nav-text">问题 13 - 实用性探讨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%98-13-%E5%9B%9E%E7%AD%94%EF%BC%9A"><span class="nav-text">问题 13 - 回答：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%AF%E9%80%89%E9%97%AE%E9%A2%98-%E9%A2%84%E6%B5%8B%E5%8C%97%E4%BA%AC%E6%88%BF%E4%BB%B7"><span class="nav-text">可选问题 - 预测北京房价</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%BD%BD%E5%85%A5%E6%95%B0%E6%8D%AE%E9%9B%86"><span class="nav-text">1. 载入数据集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E6%95%B0%E6%8D%AE%E5%88%86%E5%89%B2%E4%B8%8E%E9%87%8D%E6%8E%92"><span class="nav-text">2. 数据分割与重排</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%AE%9A%E4%B9%89%E8%A1%A1%E9%87%8F%E6%A0%87%E5%87%86"><span class="nav-text">3. 定义衡量标准</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%88%86%E6%9E%90%E6%A8%A1%E5%9E%8B%E8%A1%A8%E7%8E%B0%EF%BC%88%E5%B8%A6%E5%89%AA%E6%9E%9D%E5%86%B3%E7%AD%96%E6%A0%91%EF%BC%8C%E9%A1%B9%E7%9B%AE%E6%8F%90%E4%BE%9B%EF%BC%89"><span class="nav-text">4. 分析模型表现（带剪枝决策树，项目提供）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E7%BD%91%E6%A0%BC%E6%90%9C%E7%B4%A2%E9%80%89%E6%8B%A9%E6%9C%80%E4%BC%98%E5%8F%82%E6%95%B0"><span class="nav-text">5. 网格搜索选择最优参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E4%BD%9C%E5%87%BA%E9%A2%84%E6%B5%8B"><span class="nav-text">6. 作出预测</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E6%B5%8B%E8%AF%95%E6%A8%A1%E5%9E%8B%E5%81%A5%E5%A3%AE%E6%80%A7"><span class="nav-text">7. 测试模型健壮性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%9814-%E5%8C%97%E4%BA%AC%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B"><span class="nav-text">问题14 - 北京房价预测</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%97%AE%E9%A2%9814-%E5%9B%9E%E7%AD%94"><span class="nav-text">问题14 - 回答</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">xiaohai</p>
  <div class="site-description" itemprop="description">我在这个技术博客中分享学习笔记，提供实用技巧和工具资源。</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">74</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">131</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/veraposeidon" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;veraposeidon" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/HiYoake" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;HiYoake" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/big/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://shenxiaohai.me/boston-housing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="xiaohai">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SHEN's DevNotes">
      <meta itemprop="description" content="我在这个技术博客中分享学习笔记，提供实用技巧和工具资源。">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="波士顿房价预测 | SHEN's DevNotes">
      <meta itemprop="description" content="项目来自Udacity 机器学习工程师纳米学位。题目通过对UCI的波士顿房价数据进行分析，训练和测试一个模型，并对模型的性能和预测能力进行测试，重点：数据载入、分割、网格搜索最优化、健壮性测试。">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          波士顿房价预测
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-07-20 10:41:08" itemprop="dateCreated datePublished" datetime="2018-07-20T10:41:08Z">2018-07-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-03-11 05:03:52" itemprop="dateModified" datetime="2023-03-11T05:03:52Z">2023-03-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">机器学习</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">项目来自Udacity 机器学习工程师纳米学位。题目通过对UCI的波士顿房价数据进行分析，训练和测试一个模型，并对模型的性能和预测能力进行测试，重点：数据载入、分割、网格搜索最优化、健壮性测试。</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>英文项目地址：<a target="_blank" rel="noopener" href="https://github.com/udacity/machine-learning/tree/master/projects/boston_housing">Project: Predicting Boston Housing Prices</a></p>
<p>中文项目地址：<a target="_blank" rel="noopener" href="https://github.com/nd009/boston_housing">波士顿房价预测</a></p>
<p>项目个人地址：<a target="_blank" rel="noopener" href="https://github.com/veraposeidon/boston_housing">波士顿房价预测</a></p>
<h2 id="模型评价与验证"><a href="#模型评价与验证" class="headerlink" title="模型评价与验证"></a>模型评价与验证</h2><h2 id="项目-1-预测波士顿房价"><a href="#项目-1-预测波士顿房价" class="headerlink" title="项目 1: 预测波士顿房价"></a>项目 1: 预测波士顿房价</h2><p>欢迎来到机器学习工程师纳米学位的第一个项目！在此文件中，有些示例代码已经提供给你，但你还需要实现更多的功能来让项目成功运行。除非有明确要求，你无须修改任何已给出的代码。以<strong>编程练习</strong>开始的标题表示接下来的内容中有需要你必须实现的功能。每一部分都会有详细的指导，需要实现的部分也会在注释中以<strong>TODO</strong>标出。请仔细阅读所有的提示！</p>
<p>除了实现代码外，你还<strong>必须</strong>回答一些与项目和实现有关的问题。每一个需要你回答的问题都会以**’问题 X’<strong>为标题。请仔细阅读每个问题，并且在问题后的</strong>‘回答’**文字框中写出完整的答案。你的项目将会根据你对问题的回答和撰写代码所实现的功能来进行评分。</p>
<blockquote>
<p><strong>提示：</strong>Code 和 Markdown 区域可通过 <strong>Shift + Enter</strong> 快捷键运行。此外，Markdown可以通过双击进入编辑模式。</p>
</blockquote>
<hr>
<h2 id="第一步-导入数据"><a href="#第一步-导入数据" class="headerlink" title="第一步. 导入数据"></a>第一步. 导入数据</h2><p>在这个项目中，你将利用马萨诸塞州波士顿郊区的房屋信息数据训练和测试一个模型，并对模型的性能和预测能力进行测试。通过该数据训练后的好的模型可以被用来对房屋做特定预测—尤其是对房屋的价值。对于房地产经纪等人的日常工作来说，这样的预测模型被证明非常有价值。</p>
<p>此项目的数据集来自<a target="_blank" rel="noopener" href="https://archive.ics.uci.edu/ml/datasets.html">UCI机器学习知识库(数据集已下线)</a>。波士顿房屋这些数据于1978年开始统计，共506个数据点，涵盖了麻省波士顿不同郊区房屋14种特征的信息。本项目对原始数据集做了以下处理：</p>
<ul>
<li>有16个<code>&#39;MEDV&#39;</code> 值为50.0的数据点被移除。 这很可能是由于这些数据点包含<strong>遗失</strong>或<strong>看不到的值</strong>。</li>
<li>有1个数据点的 <code>&#39;RM&#39;</code> 值为8.78. 这是一个异常值，已经被移除。</li>
<li>对于本项目，房屋的<code>&#39;RM&#39;</code>， <code>&#39;LSTAT&#39;</code>，<code>&#39;PTRATIO&#39;</code>以及<code>&#39;MEDV&#39;</code>特征是必要的，其余不相关特征已经被移除。</li>
<li><code>&#39;MEDV&#39;</code>特征的值已经过必要的数学转换，可以反映35年来市场的通货膨胀效应。</li>
</ul>
<p>运行下面区域的代码以载入波士顿房屋数据集，以及一些此项目所需的Python库。如果成功返回数据集的大小，表示数据集已载入成功。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 载入此项目所需要的库</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> visuals <span class="keyword">as</span> vs <span class="comment"># Supplementary code</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查你的Python版本</span></span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> version_info</span><br><span class="line"><span class="keyword">if</span> version_info.major != <span class="number">2</span> <span class="keyword">and</span> version_info.minor != <span class="number">7</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">&#x27;请使用Python 2.7来完成此项目&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 让结果在notebook中显示</span></span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 载入波士顿房屋的数据集</span></span><br><span class="line">data = pd.read_csv(<span class="string">&#x27;housing.csv&#x27;</span>)</span><br><span class="line">prices = data[<span class="string">&#x27;MEDV&#x27;</span>]</span><br><span class="line">features = data.drop(<span class="string">&#x27;MEDV&#x27;</span>, axis = <span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 完成</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Boston housing dataset has &#123;&#125; data points with &#123;&#125; variables each.&quot;</span>.<span class="built_in">format</span>(*data.shape)</span><br></pre></td></tr></table></figure>

<pre><code>Boston housing dataset has 489 data points with 4 variables each.
</code></pre>
<hr>
<h2 id="第二步-分析数据"><a href="#第二步-分析数据" class="headerlink" title="第二步. 分析数据"></a>第二步. 分析数据</h2><p>在项目的第一个部分，你会对波士顿房地产数据进行初步的观察并给出你的分析。通过对数据的探索来熟悉数据可以让你更好地理解和解释你的结果。</p>
<p>由于这个项目的最终目标是建立一个预测房屋价值的模型，我们需要将数据集分为**特征(features)<strong>和</strong>目标变量(target variable)**。</p>
<ul>
<li><strong>特征</strong> <code>&#39;RM&#39;</code>， <code>&#39;LSTAT&#39;</code>，和 <code>&#39;PTRATIO&#39;</code>，给我们提供了每个数据点的数量相关的信息。</li>
<li><strong>目标变量</strong>：<code> &#39;MEDV&#39;</code>，是我们希望预测的变量。</li>
</ul>
<p>他们分别被存在<code>features</code>和<code>prices</code>两个变量名中。</p>
<h3 id="编程练习-1：基础统计运算"><a href="#编程练习-1：基础统计运算" class="headerlink" title="编程练习 1：基础统计运算"></a>编程练习 1：基础统计运算</h3><p>你的第一个编程练习是计算有关波士顿房价的描述统计数据。我们已为你导入了<code>numpy</code>，你需要使用这个库来执行必要的计算。这些统计数据对于分析模型的预测结果非常重要的。<br>在下面的代码中，你要做的是：</p>
<ul>
<li>计算<code>prices</code>中的<code>&#39;MEDV&#39;</code>的最小值、最大值、均值、中值和标准差；</li>
<li>将运算结果储存在相应的变量中。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#TODO 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#目标：计算价值的最小值</span></span><br><span class="line">minimum_price = np.<span class="built_in">min</span>(prices)</span><br><span class="line"></span><br><span class="line"><span class="comment">#目标：计算价值的最大值</span></span><br><span class="line">maximum_price = np.<span class="built_in">max</span>(prices)</span><br><span class="line"></span><br><span class="line"><span class="comment">#目标：计算价值的平均值</span></span><br><span class="line">mean_price = np.mean(prices)</span><br><span class="line"></span><br><span class="line"><span class="comment">#目标：计算价值的中值</span></span><br><span class="line">median_price = np.median(prices)</span><br><span class="line"></span><br><span class="line"><span class="comment">#目标：计算价值的标准差</span></span><br><span class="line">std_price = np.std(prices)</span><br><span class="line"></span><br><span class="line"><span class="comment">#目标：输出计算的结果</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Statistics for Boston housing dataset:\n&quot;</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Minimum price: $&#123;:,.2f&#125;&quot;</span>.<span class="built_in">format</span>(minimum_price)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Maximum price: $&#123;:,.2f&#125;&quot;</span>.<span class="built_in">format</span>(maximum_price)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Mean price: $&#123;:,.2f&#125;&quot;</span>.<span class="built_in">format</span>(mean_price)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Median price $&#123;:,.2f&#125;&quot;</span>.<span class="built_in">format</span>(median_price)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Standard deviation of prices: $&#123;:,.2f&#125;&quot;</span>.<span class="built_in">format</span>(std_price)</span><br></pre></td></tr></table></figure>

<pre><code>Statistics for Boston housing dataset:

Minimum price: $105,000.00
Maximum price: $1,024,800.00
Mean price: $454,342.94
Median price $438,900.00
Standard deviation of prices: $165,171.13
</code></pre>
<h3 id="问题-1-特征观察"><a href="#问题-1-特征观察" class="headerlink" title="问题 1 - 特征观察"></a>问题 1 - 特征观察</h3><p>如前文所述，本项目中我们关注的是其中三个值:<code>&#39;RM&#39;</code>、<code>&#39;LSTAT&#39;</code> 和<code>&#39;PTRATIO&#39;</code>，对每一个数据点:</p>
<ul>
<li><code>&#39;RM&#39;</code> 是该地区中每个房屋的平均房间数量；</li>
<li><code>&#39;LSTAT&#39;</code> 是指该地区有多少百分比的业主属于是低收入阶层（有工作但收入微薄）；</li>
<li><code>&#39;PTRATIO&#39;</code> 是该地区的中学和小学里，学生和老师的数目比（<code>学生/老师</code>）。</li>
</ul>
<p><em>凭直觉，上述三个特征中对每一个来说，你认为增大该特征的数值，<code>&#39;MEDV&#39;</code>的值会是<strong>增大</strong>还是<strong>减小</strong>呢？每一个答案都需要你给出理由。</em></p>
<p><strong>提示：</strong>你预期一个<code>&#39;RM&#39;</code> 值是6的房屋跟<code>&#39;RM&#39;</code> 值是7的房屋相比，价值更高还是更低呢？</p>
<h3 id="问题-1-回答："><a href="#问题-1-回答：" class="headerlink" title="问题 1 - 回答："></a>问题 1 - 回答：</h3><ol>
<li><p>‘RM’增大，’MEDV’增大。因为每个房屋的平均房间数量增多，自然房屋的价值会上升。</p>
</li>
<li><p>‘LSTAT’增大，’MEDV’减小。因为业主收入低，购买房屋的意愿会降低，供大于求，自然房屋的价格会下降。</p>
</li>
<li><p>‘PTRATIO’增大，’MEDV’减小。因为学生&#x2F;老师比例增大，则意味着学校师资力量相对变少，房屋的价值会下降。</p>
</li>
</ol>
<h3 id="编程练习-2-数据分割与重排"><a href="#编程练习-2-数据分割与重排" class="headerlink" title="编程练习 2: 数据分割与重排"></a>编程练习 2: 数据分割与重排</h3><p>接下来，你需要把波士顿房屋数据集分成训练和测试两个子集。通常在这个过程中，数据也会被重排列，以消除数据集中由于顺序而产生的偏差。<br>在下面的代码中，你需要</p>
<p>使用 <code>sklearn.model_selection</code> 中的 <code>train_test_split</code>， 将<code>features</code>和<code>prices</code>的数据都分成用于训练的数据子集和用于测试的数据子集。</p>
<ul>
<li>分割比例为：80%的数据用于训练，20%用于测试；</li>
<li>选定一个数值以设定 <code>train_test_split</code> 中的 <code>random_state</code> ，这会确保结果的一致性；</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TODO 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提示： 导入train_test_split</span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(features, prices,test_size = <span class="number">0.2</span>,  random_state=<span class="number">42</span>)</span><br></pre></td></tr></table></figure>

<h3 id="问题-2-训练及测试"><a href="#问题-2-训练及测试" class="headerlink" title="问题 2 - 训练及测试"></a>问题 2 - 训练及测试</h3><p><em>将数据集按一定比例分为训练用的数据集和测试用的数据集对学习算法有什么好处？</em></p>
<p><em>如果用模型已经见过的数据，例如部分训练集数据进行测试，又有什么坏处？</em></p>
<p><strong>提示：</strong> 如果没有数据来对模型进行测试，会出现什么问题？</p>
<h3 id="问题-2-回答"><a href="#问题-2-回答" class="headerlink" title="问题 2 - 回答:"></a>问题 2 - 回答:</h3><ol>
<li>将数据集按一定比例分为训练集和测试集对学习算法有什么好处？</li>
</ol>
<p>测试集可以用来做测试，测试训练结果在未知的新的数据集下的泛化能力，用于评估训练结果的泛化误差。</p>
<ol start="2">
<li>如果用模型已经见过的数据，例如部分训练集数据进行测试，又有什么坏处？</li>
</ol>
<p>如果用部分训练数据进行测试，则测试结果不能完全代表训练模型的泛化能力，影响对训练模型的评估。</p>
<hr>
<h2 id="第三步-模型衡量标准"><a href="#第三步-模型衡量标准" class="headerlink" title="第三步. 模型衡量标准"></a>第三步. 模型衡量标准</h2><p>在项目的第三步中，你需要了解必要的工具和技巧来让你的模型进行预测。用这些工具和技巧对每一个模型的表现做精确的衡量可以极大地增强你预测的信心。</p>
<h3 id="编程练习3：定义衡量标准"><a href="#编程练习3：定义衡量标准" class="headerlink" title="编程练习3：定义衡量标准"></a>编程练习3：定义衡量标准</h3><p>如果不能对模型的训练和测试的表现进行量化地评估，我们就很难衡量模型的好坏。通常我们会定义一些衡量标准，这些标准可以通过对某些误差或者拟合程度的计算来得到。在这个项目中，你将通过运算<a target="_blank" rel="noopener" href="http://stattrek.com/statistics/dictionary.aspx?definition=coefficient_of_determination"><em>决定系数</em></a> R<sup>2</sup> 来量化模型的表现。模型的决定系数是回归分析中十分常用的统计信息，经常被当作衡量模型预测能力好坏的标准。</p>
<p>R<sup>2</sup>的数值范围从0至1，表示<strong>目标变量</strong>的预测值和实际值之间的相关程度平方的百分比。一个模型的R<sup>2</sup> 值为0还不如直接用<strong>平均值</strong>来预测效果好；而一个R<sup>2</sup> 值为1的模型则可以对目标变量进行完美的预测。从0至1之间的数值，则表示该模型中目标变量中有百分之多少能够用<strong>特征</strong>来解释。<em>模型也可能出现负值的R<sup>2</sup>，这种情况下模型所做预测有时会比直接计算目标变量的平均值差很多。</em></p>
<p>在下方代码的 <code>performance_metric</code> 函数中，你要实现：</p>
<ul>
<li>使用 <code>sklearn.metrics</code> 中的 <a target="_blank" rel="noopener" href="http://scikit-learn.org/stable/modules/generated/sklearn.metrics.r2_score.html"><code>r2_score</code></a> 来计算 <code>y_true</code> 和 <code>y_predict</code>的R<sup>2</sup>值，作为对其表现的评判。</li>
<li>将他们的表现评分储存到<code>score</code>变量中。</li>
</ul>
<p>或 </p>
<ul>
<li>(可选) 不使用任何外部库，参考<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Coefficient_of_determination">决定系数的定义</a>进行计算，这也可以帮助你更好的理解决定系数在什么情况下等于0或等于1。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TODO 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提示： 导入r2_score</span></span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> r2_score</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">performance_metric</span>(<span class="params">y_true, y_predict</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;计算并返回预测值相比于预测值的分数&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    score = r2_score(y_true, y_predict)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> score</span><br></pre></td></tr></table></figure>

<p>R2定义如图：<br><img data-src="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511029/blog/wehcmgjziilzv3pkjyjo.jpg" alt="aa"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TODO 3 可选</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不允许导入任何计算决定系数的库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">performance_metric2</span>(<span class="params">y_true, y_predict</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;计算并返回预测值相比于预测值的分数&quot;&quot;&quot;</span></span><br><span class="line">    y_true = np.array(y_true)</span><br><span class="line">    y_predict = np.array(y_predict)</span><br><span class="line">    score = <span class="number">1</span> - ((np.<span class="built_in">sum</span>(np.square(y_true-y_predict)))/(np.<span class="built_in">sum</span>(np.square(y_true-np.mean(y_true)))))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> score</span><br></pre></td></tr></table></figure>

<h3 id="问题-3-拟合程度"><a href="#问题-3-拟合程度" class="headerlink" title="问题 3 - 拟合程度"></a>问题 3 - 拟合程度</h3><p>假设一个数据集有五个数据且一个模型做出下列目标变量的预测：</p>
<table>
<thead>
<tr>
<th align="center">真实数值</th>
<th align="center">预测数值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">3.0</td>
<td align="center">2.5</td>
</tr>
<tr>
<td align="center">-0.5</td>
<td align="center">0.0</td>
</tr>
<tr>
<td align="center">2.0</td>
<td align="center">2.1</td>
</tr>
<tr>
<td align="center">7.0</td>
<td align="center">7.8</td>
</tr>
<tr>
<td align="center">4.2</td>
<td align="center">5.3</td>
</tr>
<tr>
<td align="center"><em>你觉得这个模型已成功地描述了目标变量的变化吗？如果成功，请解释为什么，如果没有，也请给出原因。</em></td>
<td align="center"></td>
</tr>
</tbody></table>
<p><strong>提示</strong>：运行下方的代码，使用<code>performance_metric</code>函数来计算模型的决定系数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 计算这个模型的预测结果的决定系数</span></span><br><span class="line">score = performance_metric([<span class="number">3</span>, -<span class="number">0.5</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">4.2</span>], [<span class="number">2.5</span>, <span class="number">0.0</span>, <span class="number">2.1</span>, <span class="number">7.8</span>, <span class="number">5.3</span>])</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Model has a coefficient of determination, R^2, of &#123;:.3f&#125;.&quot;</span>.<span class="built_in">format</span>(score)</span><br></pre></td></tr></table></figure>

<pre><code>Model has a coefficient of determination, R^2, of 0.923.
</code></pre>
<h3 id="问题-3-回答"><a href="#问题-3-回答" class="headerlink" title="问题 3 - 回答:"></a>问题 3 - 回答:</h3><p>我认为这个模型已成功地描述了目标变量的变化。<br>因为预测结果斗鱼真实数值相差不大，与R2表示的分数十分贴近。</p>
<hr>
<h2 id="第四步-分析模型的表现"><a href="#第四步-分析模型的表现" class="headerlink" title="第四步. 分析模型的表现"></a>第四步. 分析模型的表现</h2><p>在项目的第四步，我们来看一下不同参数下，模型在训练集和验证集上的表现。这里，我们专注于一个特定的算法（带剪枝的决策树，但这并不是这个项目的重点），和这个算法的一个参数 <code>&#39;max_depth&#39;</code>。用全部训练集训练，选择不同<code>&#39;max_depth&#39;</code> 参数，观察这一参数的变化如何影响模型的表现。画出模型的表现来对于分析过程十分有益，这可以让我们看到一些单看结果看不到的行为。</p>
<h3 id="学习曲线"><a href="#学习曲线" class="headerlink" title="学习曲线"></a>学习曲线</h3><p>下方区域内的代码会输出四幅图像，它们是一个决策树模型在不同最大深度下的表现。每一条曲线都直观得显示了随着训练数据量的增加，模型学习曲线的在训练集评分和验证集评分的变化，评分使用决定系数R<sup>2</sup>。曲线的阴影区域代表的是该曲线的不确定性（用标准差衡量）。</p>
<p>运行下方区域中的代码，并利用输出的图形回答下面的问题。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 根据不同的训练集大小，和最大深度，生成学习曲线</span></span><br><span class="line">vs.ModelLearning(X_train, y_train)</span><br></pre></td></tr></table></figure>


<p><img data-src="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511030/blog/vg9pm23ctskr7cmonchm.png" alt="png"></p>
<h3 id="问题-4-学习曲线"><a href="#问题-4-学习曲线" class="headerlink" title="问题 4 - 学习曲线"></a>问题 4 - 学习曲线</h3><p><em>选择上述图像中的其中一个，并给出其最大深度。随着训练数据量的增加，训练集曲线的评分有怎样的变化？验证集曲线呢？如果有更多的训练数据，是否能有效提升模型的表现呢？</em></p>
<p><strong>提示：</strong>学习曲线的评分是否最终会收敛到特定的值？</p>
<h3 id="问题-4-回答"><a href="#问题-4-回答" class="headerlink" title="问题 4 - 回答:"></a>问题 4 - 回答:</h3><p>选择第三个曲线。</p>
<p>max_depth&#x3D;6。</p>
<p>随着训练数据的增加，训练集曲线的评分开始有所下降，最终收敛到0.85左右。</p>
<p>验证集曲线开始出现明显增长，然后逐渐降低了增长速度，最终收敛在0.7左右。</p>
<h3 id="复杂度曲线"><a href="#复杂度曲线" class="headerlink" title="复杂度曲线"></a>复杂度曲线</h3><p>下列代码内的区域会输出一幅图像，它展示了一个已经经过训练和验证的决策树模型在不同最大深度条件下的表现。这个图形将包含两条曲线，一个是训练集的变化，一个是验证集的变化。跟<strong>学习曲线</strong>相似，阴影区域代表该曲线的不确定性，模型训练和测试部分的评分都用的 <code>performance_metric</code> 函数。</p>
<p>运行下方区域中的代码，并利用输出的图形并回答下面的两个问题。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 根据不同的最大深度参数，生成复杂度曲线</span></span><br><span class="line">vs.ModelComplexity(X_train, y_train)</span><br></pre></td></tr></table></figure>


<p><img data-src="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511030/blog/kzcommvdky5asmhngrez.png" alt="png"></p>
<h3 id="问题-5-偏差（bias）与方差（variance）之间的权衡取舍"><a href="#问题-5-偏差（bias）与方差（variance）之间的权衡取舍" class="headerlink" title="问题 5 - 偏差（bias）与方差（variance）之间的权衡取舍"></a>问题 5 - 偏差（bias）与方差（variance）之间的权衡取舍</h3><p><em>当模型以最大深度 1训练时，模型的预测是出现很大的偏差还是出现了很大的方差？当模型以最大深度10训练时，情形又如何呢？图形中的哪些特征能够支持你的结论？</em></p>
<p><strong>提示：</strong> 你如何得知模型是否出现了偏差很大或者方差很大的问题？</p>
<h3 id="问题-5-回答"><a href="#问题-5-回答" class="headerlink" title="问题 5 - 回答:"></a>问题 5 - 回答:</h3><ol>
<li><p>当模型一最大深度1训练时，模型的预测出现了很大的偏差。理由:可以发现随着参数最大深度的增加，训练集的评分开始上升，说明当maimumDepth&#x3D;1时，模型的学习能力不强。</p>
</li>
<li><p>当模型一最大深度10训练时，模型的预测出现了很大的方差。理由：可以发现虽然随着最大深度的增加，训练集的评分不断上升，但是从maxmumDepth&#x3D;4开始，测试集的评分就不断下降，这说明模型的学习能力过于强大，泛化的能力不足，出现了严重的过拟合现象。</p>
</li>
</ol>
<h3 id="问题-6-最优模型的猜测"><a href="#问题-6-最优模型的猜测" class="headerlink" title="问题 6- 最优模型的猜测"></a>问题 6- 最优模型的猜测</h3><p><em>结合问题 5 中的图，你认为最大深度是多少的模型能够最好地对未见过的数据进行预测？你得出这个答案的依据是什么？</em></p>
<h3 id="问题-6-回答"><a href="#问题-6-回答" class="headerlink" title="问题 6 - 回答:"></a>问题 6 - 回答:</h3><p>我认为最大深度是3的模型能够最好地对未见过的数据进行预测。</p>
<p>从图中可以发现，当maximum&#x3D;3或者4时，模型的泛化能力最强。再结合奥卡姆剃刀原则，在同样的能力下，选择复杂度较低的那个。</p>
<hr>
<h2 id="第五步-选择最优参数"><a href="#第五步-选择最优参数" class="headerlink" title="第五步. 选择最优参数"></a>第五步. 选择最优参数</h2><h3 id="问题-7-网格搜索（Grid-Search）"><a href="#问题-7-网格搜索（Grid-Search）" class="headerlink" title="问题 7- 网格搜索（Grid Search）"></a>问题 7- 网格搜索（Grid Search）</h3><p><em>什么是网格搜索法？如何用它来优化模型？</em></p>
<h3 id="问题-7-回答"><a href="#问题-7-回答" class="headerlink" title="问题 7 - 回答:"></a>问题 7 - 回答:</h3><p>网格搜索实际上就是暴力搜索；<br>首先为想要调参的参数设定一组候选值，然后网格搜索会穷举各种参数组合，根据设定的评分机制找到最好的那一组设置。</p>
<p>摘自<a target="_blank" rel="noopener" href="https://blog.csdn.net/aliceyangxi1987/article/details/73769950">https://blog.csdn.net/aliceyangxi1987/article/details/73769950</a></p>
<p>最优的那组超参数代表了候选模型中的最优模型。</p>
<h3 id="问题-8-交叉验证"><a href="#问题-8-交叉验证" class="headerlink" title="问题 8 - 交叉验证"></a>问题 8 - 交叉验证</h3><ul>
<li>什么是K折交叉验证法（k-fold cross-validation）？</li>
<li><a target="_blank" rel="noopener" href="http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GridSearchCV.html">GridSearchCV</a>是如何结合交叉验证来完成对最佳参数组合的选择的？</li>
<li><a target="_blank" rel="noopener" href="http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GridSearchCV.html">GridSearchCV</a>中的<code>&#39;cv_results_&#39;</code>属性能告诉我们什么？</li>
<li>网格搜索时如果不使用交叉验证会有什么问题？交叉验证又是如何解决这个问题的？</li>
</ul>
<p><strong>提示：</strong> 在下面 fit_model函数最后加入 <code>print pd.DataFrame(grid.cv_results_)</code> 可以帮你查看更多信息。</p>
<h3 id="问题-8-回答："><a href="#问题-8-回答：" class="headerlink" title="问题 8 - 回答："></a>问题 8 - 回答：</h3><ol>
<li>什么是K折交叉验证法？</li>
</ol>
<p>在样本量不充足的情况下，为了充分利用数据集对算法效果进行测试，将数据集随机分为k个包，每次将其中一个包作为测试集，剩下k-1个包作为训练集进行训练。</p>
<ol start="2">
<li><p>GridSearchCV是如何结合交叉验证来完成对最佳参数组合的选择的？<br>GridSearch 用于遍历各种参数组合，CV交叉验证用于确认模型的泛化能力。</p>
</li>
<li><p>cv_results代表了遍历参数组合之后得到的最优的参数组合。</p>
</li>
<li><p>不适用交叉验证就无法评估训练模型的泛化能力。交叉验证通过将数据集分割为训练集和测试集来验证模型的泛化能力啊。</p>
</li>
</ol>
<h3 id="编程练习-4：训练最优模型"><a href="#编程练习-4：训练最优模型" class="headerlink" title="编程练习 4：训练最优模型"></a>编程练习 4：训练最优模型</h3><p>在这个练习中，你将需要将所学到的内容整合，使用<strong>决策树算法</strong>训练一个模型。为了得出的是一个最优模型，你需要使用网格搜索法训练模型，以找到最佳的 <code>&#39;max_depth&#39;</code> 参数。你可以把<code>&#39;max_depth&#39;</code> 参数理解为决策树算法在做出预测前，允许其对数据提出问题的数量。决策树是<strong>监督学习算法</strong>中的一种。</p>
<p>在下方 <code>fit_model</code> 函数中，你需要做的是：</p>
<ol>
<li><strong>定义 <code>&#39;cross_validator&#39;</code> 变量</strong>: 使用 <code>sklearn.model_selection</code> 中的 <a target="_blank" rel="noopener" href="http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.KFold.html"><code>KFold</code></a> 创建一个交叉验证生成器对象;</li>
<li><strong>定义 <code>&#39;regressor&#39;</code> 变量</strong>: 使用  <code>sklearn.tree</code> 中的 <a target="_blank" rel="noopener" href="http://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeRegressor.html"><code>DecisionTreeRegressor</code></a> 创建一个决策树的回归函数;</li>
<li><strong>定义 <code>&#39;params&#39;</code> 变量</strong>: 为 <code>&#39;max_depth&#39;</code> 参数创造一个字典，它的值是从1至10的数组;</li>
<li><strong>定义 <code>&#39;scoring_fnc&#39;</code> 变量</strong>: 使用 <code>sklearn.metrics</code> 中的 <a target="_blank" rel="noopener" href="http://scikit-learn.org/stable/modules/generated/sklearn.metrics.make_scorer.html"><code>make_scorer</code></a>  创建一个评分函数；<br> 将 <code>‘performance_metric’</code> 作为参数传至这个函数中；</li>
<li><strong>定义 <code>&#39;grid&#39;</code> 变量</strong>: 使用 <code>sklearn.model_selection</code> 中的 <a target="_blank" rel="noopener" href="http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GridSearchCV.html"><code>GridSearchCV</code></a> 创建一个网格搜索对象；将变量<code>&#39;regressor&#39;</code>, <code>&#39;params&#39;</code>, <code>&#39;scoring_fnc&#39;</code>和 <code>&#39;cross_validator&#39;</code> 作为参数传至这个对象构造函数中；</li>
</ol>
<p>如果你对python函数的默认参数定义和传递不熟悉，可以参考这个MIT课程的<a target="_blank" rel="noopener" href="http://cn-static.udacity.com/mlnd/videos/MIT600XXT114-V004200_DTH.mp4">视频</a>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TODO 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#提示: 导入 &#x27;KFold&#x27; &#x27;DecisionTreeRegressor&#x27; &#x27;make_scorer&#x27; &#x27;GridSearchCV&#x27; </span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> KFold</span><br><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeRegressor</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> make_scorer</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fit_model</span>(<span class="params">X, y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 基于输入数据 [X,y]，利于网格搜索找到最优的决策树模型&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    cross_validator = KFold()</span><br><span class="line">    </span><br><span class="line">    regressor = DecisionTreeRegressor()</span><br><span class="line"></span><br><span class="line">    params = &#123;<span class="string">&#x27;max_depth&#x27;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]&#125;</span><br><span class="line"></span><br><span class="line">    scoring_fnc = make_scorer(performance_metric)</span><br><span class="line"></span><br><span class="line">    grid = GridSearchCV(regressor, params, scoring=scoring_fnc, cv = cross_validator)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 基于输入数据 [X,y]，进行网格搜索</span></span><br><span class="line">    grid = grid.fit(X, y)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 返回网格搜索后的最优模型</span></span><br><span class="line">    <span class="keyword">return</span> grid.best_estimator_</span><br></pre></td></tr></table></figure>

<h3 id="编程练习-4：训练最优模型-（可选）"><a href="#编程练习-4：训练最优模型-（可选）" class="headerlink" title="编程练习 4：训练最优模型 （可选）"></a>编程练习 4：训练最优模型 （可选）</h3><p>在这个练习中，你将需要将所学到的内容整合，使用<strong>决策树算法</strong>训练一个模型。为了得出的是一个最优模型，你需要使用网格搜索法训练模型，以找到最佳的 <code>&#39;max_depth&#39;</code> 参数。你可以把<code>&#39;max_depth&#39;</code> 参数理解为决策树算法在做出预测前，允许其对数据提出问题的数量。决策树是<strong>监督学习算法</strong>中的一种。</p>
<p>在下方 <code>fit_model</code> 函数中，你需要做的是：</p>
<ul>
<li>遍历参数<code>‘max_depth’</code>的可选值 1～10，构造对应模型</li>
<li>计算当前模型的交叉验证分数</li>
<li>返回最优交叉验证分数对应的模型</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TODO 4 可选</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">不允许使用 DecisionTreeRegressor 以外的任何 sklearn 库</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">提示: 你可能需要实现下面的 cross_val_score 函数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">def cross_val_score(estimator, X, y, scoring = performance_metric, cv=3):</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot; 返回每组交叉验证的模型分数的数组 &quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    scores = [0,0,0]</span></span><br><span class="line"><span class="string">    return scores</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fit_model2</span>(<span class="params">X, y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 基于输入数据 [X,y]，利于网格搜索找到最优的决策树模型&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#最优交叉验证分数对应的最优模型</span></span><br><span class="line">    best_estimator = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> best_estimator</span><br></pre></td></tr></table></figure>

<h3 id="问题-9-最优模型"><a href="#问题-9-最优模型" class="headerlink" title="问题 9 - 最优模型"></a>问题 9 - 最优模型</h3><p><em>最优模型的最大深度（maximum depth）是多少？此答案与你在<strong>问题 6</strong>所做的猜测是否相同？</em></p>
<p>运行下方区域内的代码，将决策树回归函数代入训练数据的集合，以得到最优化的模型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基于训练数据，获得最优模型</span></span><br><span class="line">optimal_reg = fit_model(X_train, y_train)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出最优模型的 &#x27;max_depth&#x27; 参数</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Parameter &#x27;max_depth&#x27; is &#123;&#125; for the optimal model.&quot;</span>.<span class="built_in">format</span>(optimal_reg.get_params()[<span class="string">&#x27;max_depth&#x27;</span>])</span><br></pre></td></tr></table></figure>

<pre><code>Parameter &#39;max_depth&#39; is 4 for the optimal model.
</code></pre>
<h3 id="问题-9-回答："><a href="#问题-9-回答：" class="headerlink" title="问题 9 - 回答："></a>问题 9 - 回答：</h3><p>最优模型的最大深度（maximum depth）是4。</p>
<p>此答案与我在问题 6所做的猜测不相同。</p>
<h2 id="第六步-做出预测"><a href="#第六步-做出预测" class="headerlink" title="第六步. 做出预测"></a>第六步. 做出预测</h2><p>当我们用数据训练出一个模型，它现在就可用于对新的数据进行预测。在决策树回归函数中，模型已经学会对新输入的数据<em>提问</em>，并返回对<strong>目标变量</strong>的预测值。你可以用这个预测来获取数据未知目标变量的信息，这些数据必须是不包含在训练数据之内的。</p>
<h3 id="问题-10-预测销售价格"><a href="#问题-10-预测销售价格" class="headerlink" title="问题 10 - 预测销售价格"></a>问题 10 - 预测销售价格</h3><p>想像你是一个在波士顿地区的房屋经纪人，并期待使用此模型以帮助你的客户评估他们想出售的房屋。你已经从你的三个客户收集到以下的资讯:</p>
<table>
<thead>
<tr>
<th align="center">特征</th>
<th align="center">客戶 1</th>
<th align="center">客戶 2</th>
<th align="center">客戶 3</th>
</tr>
</thead>
<tbody><tr>
<td align="center">房屋内房间总数</td>
<td align="center">5 间房间</td>
<td align="center">4 间房间</td>
<td align="center">8 间房间</td>
</tr>
<tr>
<td align="center">社区贫困指数（％被认为是贫困阶层）</td>
<td align="center">17%</td>
<td align="center">32%</td>
<td align="center">3%</td>
</tr>
<tr>
<td align="center">邻近学校的学生-老师比例</td>
<td align="center">15：1</td>
<td align="center">22：1</td>
<td align="center">12：1</td>
</tr>
</tbody></table>
<p><em>你会建议每位客户的房屋销售的价格为多少？从房屋特征的数值判断，这样的价格合理吗？为什么？</em> </p>
<p><strong>提示：</strong>用你在<strong>分析数据</strong>部分计算出来的统计信息来帮助你证明你的答案。</p>
<p>运行下列的代码区域，使用你优化的模型来为每位客户的房屋价值做出预测。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成三个客户的数据</span></span><br><span class="line">client_data = [[<span class="number">5</span>, <span class="number">17</span>, <span class="number">15</span>], <span class="comment"># 客户 1</span></span><br><span class="line">               [<span class="number">4</span>, <span class="number">32</span>, <span class="number">22</span>], <span class="comment"># 客户 2</span></span><br><span class="line">               [<span class="number">8</span>, <span class="number">3</span>, <span class="number">12</span>]]  <span class="comment"># 客户 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进行预测</span></span><br><span class="line">predicted_price = optimal_reg.predict(client_data)</span><br><span class="line"><span class="keyword">for</span> i, price <span class="keyword">in</span> <span class="built_in">enumerate</span>(predicted_price):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;Predicted selling price for Client &#123;&#125;&#x27;s home: $&#123;:,.2f&#125;&quot;</span>.<span class="built_in">format</span>(i+<span class="number">1</span>, price)</span><br></pre></td></tr></table></figure>

<pre><code>Predicted selling price for Client 1&#39;s home: $403,025.00
Predicted selling price for Client 2&#39;s home: $237,478.72
Predicted selling price for Client 3&#39;s home: $931,636.36
</code></pre>
<h3 id="问题-10-回答："><a href="#问题-10-回答：" class="headerlink" title="问题 10 - 回答："></a>问题 10 - 回答：</h3><p>客户1的建议售价为$403,025.00；</p>
<p>客户2的建议售价为$403,025.00；</p>
<p>客户3的建议售价为$931,636.36；</p>
<p>从房屋特征的数值看，这样的价格比较合理，符合 <strong>问题1</strong> 中的特征观察。</p>
<h3 id="编程练习-5"><a href="#编程练习-5" class="headerlink" title="编程练习 5"></a>编程练习 5</h3><p>你刚刚预测了三个客户的房子的售价。在这个练习中，你将用你的最优模型在整个测试数据上进行预测, 并计算相对于目标变量的决定系数 R<sup>2</sup>的值**。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#TODO 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提示：你可能需要用到 X_test, y_test, optimal_reg, performance_metric</span></span><br><span class="line"><span class="comment"># 提示：你可能需要参考问题10的代码进行预测</span></span><br><span class="line"><span class="comment"># 提示：你可能需要参考问题3的代码来计算R^2的值</span></span><br><span class="line">predicted = optimal_reg.predict(X_test)</span><br><span class="line">r2  = performance_metric(y_test, predicted)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Optimal model has R^2 score &#123;:,.2f&#125; on test data&quot;</span>.<span class="built_in">format</span>(r2)</span><br></pre></td></tr></table></figure>

<pre><code>Optimal model has R^2 score 0.84 on test data
</code></pre>
<h3 id="问题11-分析决定系数"><a href="#问题11-分析决定系数" class="headerlink" title="问题11 - 分析决定系数"></a>问题11 - 分析决定系数</h3><p>你刚刚计算了最优模型在测试集上的决定系数，你会如何评价这个结果？</p>
<h3 id="问题11-回答"><a href="#问题11-回答" class="headerlink" title="问题11 - 回答"></a>问题11 - 回答</h3><p>决定系数R<sup>2</sup>的职位0.84，说明预测的结果与实际结果有较好的拟合程度。</p>
<h3 id="模型健壮性"><a href="#模型健壮性" class="headerlink" title="模型健壮性"></a>模型健壮性</h3><p>一个最优的模型不一定是一个健壮模型。有的时候模型会过于复杂或者过于简单，以致于难以泛化新增添的数据；有的时候模型采用的学习算法并不适用于特定的数据结构；有的时候样本本身可能有太多噪点或样本过少，使得模型无法准确地预测目标变量。这些情况下我们会说模型是欠拟合的。</p>
<h3 id="问题-12-模型健壮性"><a href="#问题-12-模型健壮性" class="headerlink" title="问题 12 - 模型健壮性"></a>问题 12 - 模型健壮性</h3><p>模型是否足够健壮来保证预测的一致性？</p>
<p><strong>提示</strong>: 执行下方区域中的代码，采用不同的训练和测试集执行 <code>fit_model</code> 函数10次。注意观察对一个特定的客户来说，预测是如何随训练数据的变化而变化的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 请先注释掉 fit_model 函数里的所有 print 语句</span></span><br><span class="line">vs.PredictTrials(features, prices, fit_model, client_data)</span><br></pre></td></tr></table></figure>

<pre><code>Trial 1: $411,000.00
Trial 2: $411,417.39
Trial 3: $415,800.00
Trial 4: $433,037.50
Trial 5: $413,334.78
Trial 6: $411,931.58
Trial 7: $399,663.16
Trial 8: $407,232.00
Trial 9: $402,531.82
Trial 10: $413,700.00

Range in prices: $33,374.34
</code></pre>
<h3 id="问题-12-回答："><a href="#问题-12-回答：" class="headerlink" title="问题 12 - 回答："></a>问题 12 - 回答：</h3><p>预测结果的变化幅度为$33,374.34，变化幅度较大，模型不够健壮。</p>
<h3 id="问题-13-实用性探讨"><a href="#问题-13-实用性探讨" class="headerlink" title="问题 13 - 实用性探讨"></a>问题 13 - 实用性探讨</h3><p><em>简单地讨论一下你建构的模型能否在现实世界中使用？</em> </p>
<p>提示：回答以下几个问题，并给出相应结论的理由：</p>
<ul>
<li><em>1978年所采集的数据，在已考虑通货膨胀的前提下，在今天是否仍然适用？</em></li>
<li><em>数据中呈现的特征是否足够描述一个房屋？</em></li>
<li><em>在波士顿这样的大都市采集的数据，能否应用在其它乡镇地区？</em></li>
<li><em>你觉得仅仅凭房屋所在社区的环境来判断房屋价值合理吗？</em></li>
</ul>
<h3 id="问题-13-回答："><a href="#问题-13-回答：" class="headerlink" title="问题 13 - 回答："></a>问题 13 - 回答：</h3><ol>
<li>1978年所采集的数据，在已考虑通货膨胀的前提下，在今天是否仍然适用？</li>
</ol>
<p>在今天不能够适用。房价受到各种条件约束，政策、经济坏境等等因素。</p>
<ol start="2">
<li>数据中呈现的特征是否足够描述一个房屋？</li>
</ol>
<p>不足以描述一个房屋，房价还受到交通坏境、周边设施等等因素影响。</p>
<ol start="3">
<li>在波士顿这样的大都市采集的数据，能否应用在其它乡镇地区？</li>
</ol>
<p>不能适用。不同类型的地区的房屋价格有不同的特征。</p>
<ol start="4">
<li>你觉得仅仅凭房屋所在社区的环境来判断房屋价值合理吗？</li>
</ol>
<p>不合理。</p>
<h2 id="可选问题-预测北京房价"><a href="#可选问题-预测北京房价" class="headerlink" title="可选问题 - 预测北京房价"></a>可选问题 - 预测北京房价</h2><p>（本题结果不影响项目是否通过）通过上面的实践，相信你对机器学习的一些常用概念有了很好的领悟和掌握。但利用70年代的波士顿房价数据进行建模的确对我们来说意义不是太大。现在你可以把你上面所学应用到北京房价数据集中 <code>bj_housing.csv</code>。</p>
<p>免责声明：考虑到北京房价受到宏观经济、政策调整等众多因素的直接影响，预测结果仅供参考。</p>
<p>这个数据集的特征有：</p>
<ul>
<li>Area：房屋面积，平方米</li>
<li>Room：房间数，间</li>
<li>Living: 厅数，间</li>
<li>School: 是否为学区房，0或1</li>
<li>Year: 房屋建造时间，年</li>
<li>Floor: 房屋所处楼层，层</li>
</ul>
<p>目标变量：</p>
<ul>
<li>Value: 房屋人民币售价，万</li>
</ul>
<p>你可以参考上面学到的内容，拿这个数据集来练习数据分割与重排、定义衡量标准、训练模型、评价模型表现、使用网格搜索配合交叉验证对参数进行调优并选出最佳参数，比较两者的差别，最终得出最佳模型对验证集的预测分数。</p>
<h2 id="1-载入数据集"><a href="#1-载入数据集" class="headerlink" title="1. 载入数据集"></a>1. 载入数据集</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bjData = pd.read_csv(<span class="string">&#x27;bj_housing.csv&#x27;</span>)</span><br><span class="line">bjPrice = bjData[<span class="string">&#x27;Value&#x27;</span>]</span><br><span class="line">bjFeature = bjData.drop(<span class="string">&#x27;Value&#x27;</span>, axis =<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;北京房价数据有 &#123;&#125; 个样本，每个样本有 &#123;&#125; 个特征&quot;</span>.<span class="built_in">format</span>(*data.shape)</span><br></pre></td></tr></table></figure>

<pre><code>北京房价数据有 489 个样本，每个样本有 4 个特征
</code></pre>
<h2 id="2-数据分割与重排"><a href="#2-数据分割与重排" class="headerlink" title="2. 数据分割与重排"></a>2. 数据分割与重排</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line">X_trainBJ, X_testBJ, y_trainBJ, y_testBJ = train_test_split(bjFeature, bjPrice,test_size = <span class="number">0.2</span>,  random_state=<span class="number">42</span>)</span><br></pre></td></tr></table></figure>

<h2 id="3-定义衡量标准"><a href="#3-定义衡量标准" class="headerlink" title="3. 定义衡量标准"></a>3. 定义衡量标准</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> r2_score</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">performance_metricBJ</span>(<span class="params">y_true, y_predict</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;计算并返回预测值相比于预测值的分数&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    score = r2_score(y_true, y_predict)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> score</span><br></pre></td></tr></table></figure>

<h2 id="4-分析模型表现（带剪枝决策树，项目提供）"><a href="#4-分析模型表现（带剪枝决策树，项目提供）" class="headerlink" title="4. 分析模型表现（带剪枝决策树，项目提供）"></a>4. 分析模型表现（带剪枝决策树，项目提供）</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 根据不同的训练集大小，和最大深度，生成学习曲线</span></span><br><span class="line">vs.ModelLearning(X_trainBJ, y_trainBJ)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据不同的最大深度参数，生成复杂度曲线</span></span><br><span class="line">vs.ModelComplexity(X_trainBJ, y_trainBJ)</span><br></pre></td></tr></table></figure>


<p><img data-src="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511031/blog/tncxzjtsltx5l2tutb8q.png" alt="png"></p>
<p><img data-src="https://res.cloudinary.com/dgchmgebr/image/upload/v1678511032/blog/dczy6i3zfc4pkwboaxln.png" alt="png"></p>
<h2 id="5-网格搜索选择最优参数"><a href="#5-网格搜索选择最优参数" class="headerlink" title="5. 网格搜索选择最优参数"></a>5. 网格搜索选择最优参数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> KFold</span><br><span class="line"><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeRegressor</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> make_scorer</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fit_modelBJ</span>(<span class="params">X, y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot; 基于输入数据 [X,y]，利于网格搜索找到最优的决策树模型&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    cross_validator = KFold()</span><br><span class="line">    </span><br><span class="line">    regressor = DecisionTreeRegressor()</span><br><span class="line"></span><br><span class="line">    params = &#123;<span class="string">&#x27;max_depth&#x27;</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]&#125;</span><br><span class="line"></span><br><span class="line">    scoring_fnc = make_scorer(performance_metric)</span><br><span class="line"></span><br><span class="line">    grid = GridSearchCV(regressor, params, scoring=scoring_fnc, cv = cross_validator)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 基于输入数据 [X,y]，进行网格搜索</span></span><br><span class="line">    grid = grid.fit(X, y)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 返回网格搜索后的最优模型</span></span><br><span class="line">    <span class="keyword">return</span> grid.best_estimator_</span><br><span class="line"></span><br><span class="line"><span class="comment"># 基于训练数据，获得最优模型b</span></span><br><span class="line">optimal_reg = fit_modelBJ(X_trainBJ, y_trainBJ)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出最优模型的 &#x27;max_depth&#x27; 参数</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Parameter &#x27;max_depth&#x27; is &#123;&#125; for the optimal model.&quot;</span>.<span class="built_in">format</span>(optimal_reg.get_params()[<span class="string">&#x27;max_depth&#x27;</span>])</span><br></pre></td></tr></table></figure>

<pre><code>Parameter &#39;max_depth&#39; is 3 for the optimal model.
</code></pre>
<h2 id="6-作出预测"><a href="#6-作出预测" class="headerlink" title="6. 作出预测"></a>6. 作出预测</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">predictedBJ = optimal_reg.predict(X_testBJ)</span><br><span class="line">r2BJ  = performance_metric(y_testBJ, predictedBJ)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Optimal model has R^2 score &#123;:,.2f&#125; on test data&quot;</span>.<span class="built_in">format</span>(r2BJ)</span><br></pre></td></tr></table></figure>

<pre><code>Optimal model has R^2 score 0.60 on test data
</code></pre>
<h2 id="7-测试模型健壮性"><a href="#7-测试模型健壮性" class="headerlink" title="7. 测试模型健壮性"></a>7. 测试模型健壮性</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BJclientData = [[<span class="number">68</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">2000</span>,<span class="number">6</span>]] <span class="comment"># 从样本选择一个</span></span><br><span class="line">vs.PredictTrials(bjFeature, bjPrice, fit_modelBJ, BJclientData)</span><br></pre></td></tr></table></figure>

<pre><code>Trial 1: $234.95
Trial 2: $274.90
Trial 3: $252.57
Trial 4: $222.45
Trial 5: $251.10
Trial 6: $244.53
Trial 7: $263.87
Trial 8: $234.87
Trial 9: $173.74
Trial 10: $255.06

Range in prices: $101.16
</code></pre>
<h3 id="问题14-北京房价预测"><a href="#问题14-北京房价预测" class="headerlink" title="问题14 - 北京房价预测"></a>问题14 - 北京房价预测</h3><p>你成功的用新的数据集构建了模型了吗？他能对测试数据进行验证吗？它的表现是否符合你的预期？交叉验证是否有助于提升你模型的表现？</p>
<p><strong>提示：</strong>如果你是从零开始构建机器学习的代码会让你一时觉得无从下手。这时不要着急，你要做的只是查看之前写的代码，把每一行都看明白，然后逐步构建你的模型。当中遇到什么问题也可以在我们论坛寻找答案。也许你会发现你所构建的模型的表现并没有达到你的预期，这说明机器学习并非是一项简单的任务，构建一个表现良好的模型需要长时间的研究和测试。这也是我们接下来的课程中会逐渐学到的。</p>
<h3 id="问题14-回答"><a href="#问题14-回答" class="headerlink" title="问题14 - 回答"></a>问题14 - 回答</h3><ol>
<li><p>成功地用新的北京房价数据构建了模型</p>
</li>
<li><p>可以对测试数据进行验证</p>
</li>
<li><p>表现不符合预期。R2分数只有0.6，同时测试发现模型不够健壮</p>
</li>
<li><p>交叉验证有助于模型提升</p>
</li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>xiaohai
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://shenxiaohai.me/boston-housing/" title="波士顿房价预测">https://shenxiaohai.me/boston-housing/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag"><i class="fa fa-tag"></i> 机器学习</a>
              <a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" rel="tag"><i class="fa fa-tag"></i> 数据分析</a>
              <a href="/tags/%E7%BD%91%E6%A0%BC%E6%90%9C%E7%B4%A2/" rel="tag"><i class="fa fa-tag"></i> 网格搜索</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/titanic-decisionTree/" rel="prev" title="泰坦尼克号幸存者分析-决策树方式">
                  <i class="fa fa-chevron-left"></i> 泰坦尼克号幸存者分析-决策树方式
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/ardrone_autonomy/" rel="next" title="ardrone_autonomy驱动相关">
                  ardrone_autonomy驱动相关 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments"><div id="twikoo-comments"></div></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-laptop"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xiaohai</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/veraposeidon" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://shenxiaohai.me/boston-housing/"}</script>
  <script src="/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="twikoo" type="application/json">{"enable":true,"visitor":false,"envId":"https://twikoo-comment.shenxiaohai.me/","el":"#twikoo-comments"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.twikoo.el)
    .then(() => NexT.utils.getScript(
      CONFIG.twikoo.jsUrl || 'https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js',
      { condition: window.twikoo }
    ))
    .then(() => {
      twikoo.init(CONFIG.twikoo);
    });
});
</script>
<style>
.post-block, .comments {
  overflow: visible;
}
.tk-owo-emotion {
  display: inline-block;
}
</style>

</body>
</html>
